CREATE TABLE IF NOT EXISTS Artists (
    id SERIAL PRIMARY KEY,
    name VARCHAR(60) NOT NULL
);

CREATE TABLE IF NOT EXISTS Genre (
    id SERIAL PRIMARY KEY,
    name VARCHAR(60) NOT NULL
);


CREATE TABLE IF NOT EXISTS ArtistsGenres (
    Artists_id INTEGER REFERENCES Artists(id),
    Genre_id INTEGER REFERENCES Genre(id),
    CONSTRAINT pk PRIMARY KEY (Artists_id, Genre_id)
);

CREATE TABLE IF NOT EXISTS Albums (
    id SERIAL PRIMARY KEY,
    title VARCHAR(60) NOT NULL,
    release DATE NOT NULL,
    CHECK (release >= '2010-01-01')
);

CREATE TABLE IF NOT EXISTS Trek (
    id SERIAL PRIMARY KEY,
    title VARCHAR(60) NOT NULL,
    duration TIME NOT NULL,
    CHECK (duration <= '00:10:00' and duration >= '00:01:00'),
    Albums_id INTEGER REFERENCES Albums(id)
);

CREATE TABLE IF NOT EXISTS ArtistsAlbums (
    Artists_id INTEGER REFERENCES Artists(id),
    Albums_id INTEGER REFERENCES Albums(id),
    CONSTRAINT ak PRIMARY KEY (Artists_id, Albums_id)
);

CREATE TABLE IF NOT EXISTS Collections (
    id SERIAL PRIMARY KEY,
    name VARCHAR(60) NOT NULL,
    release DATE NOT NULL,
    CHECK (release >= '2010-01-01'),
    trek_id INTEGER REFERENCES Trek(id)
);

CREATE TABLE IF NOT EXISTS AlbumsTreks (
    Albums_id INTEGER REFERENCES Albums(id),
    Trek_id INTEGER REFERENCES Trek(id),
    CONSTRAINT ab PRIMARY KEY (Albums_id, Trek_id)
);